# 项目状态

> 最后更新: 2026-01-09

## 📊 总体进度

```
[====================60%=================>          ]
```

**当前阶段**: 软件准备 + FPGA工具链安装

---

## ✅ 已完成（60%）

### 硬件设计 (100%)
- [x] RTL设计完成
  - [x] ALU (RV64IMA支持)
  - [x] 寄存器文件 (32x64位)
  - [x] 指令译码器
  - [x] PC程序计数器
  - [x] 指令存储器
  - [x] 数据存储器  - [x] 单周期CPU顶层模块

### 仿真测试 (90%)
- [x] Verilator仿真环境
  - [x] ALU测试: 20/21通过
  - [x] 寄存器文件测试: 全部通过
  - [x] CPU完整仿真: 成功运行100周期
- [x] Icarus Verilog仿真
  - [x] 模块级测试通过
  - ⚠️ CPU级仿真性能问题（已用Verilator代替）

### 硬件准备 (100%)
- [x] 开发板选型: ULX3S-85F
- [x] 配件确认: SD卡、Type-C线、HDMI显示器
- [x] 订单下达: 板子运输中

### 软件工具链 (100%)
- [x] RISC-V GCC工具链安装
  - [x] riscv64-linux-gnu-gcc 15.1.0
  - [x] riscv64-linux-gnu-binutils 2.44

### 文档 (80%)
- [x] 技术规范文档
- [x] 测试报告
- [x] 文档结构重组织
- [x] FPGA工具链安装指南
- [x] 软件工具链安装指南
- [x] 文档导航索引
- [x] 环境工具需求清单（简洁版，清晰列出所需工具和版本） ⭐ v2.0
- [ ] 综合流程指南（待创建）
- [ ] Linux编译指南（待创建）

---

## 🔄 进行中（20%）

### FPGA工具链 (50%)
- [x] Yosys 0.54 安装完成
- [ ] nextpnr-ecp5-nightly 编译中（后台）
- [ ] prjtrellis-nightly 编译中（后台）
- [ ] openFPGALoader 等待安装

---

## ⏳ 待完成（20%）

### FPGA综合 (0%)
- [ ] 创建约束文件 (ULX3S引脚定义)
- [ ] 综合Makefile脚本
- [ ] 首次综合测试
- [ ] LED闪烁测试程序
- [ ] CPU烧录到FPGA

### Linux系统 (0%)
- [ ] 下载Linux内核源码
- [ ] 内核配置 (RV64IMA)
- [ ] 编译内核
- [ ] 编译Busybox
- [ ] 制作rootfs
- [ ] 编译OpenSBI

### 系统集成 (0%)
- [ ] 准备SD卡镜像
- [ ] 从SD卡启动测试
- [ ] 串口调试输出
- [ ] HDMI显示测试
- [ ] 完整Linux启动

---

## 🎯 里程碑

### 里程碑1: 硬件仿真 ✅ (已完成)
- **时间**: 2026-01-08
- **成果**: CPU仿真成功，核心模块测试通过

### 里程碑2: FPGA工具链 🔄 (进行中)
- **预计**: 2026-01-09
- **目标**: 完整工具链就绪

### 里程碑3: FPGA首次点灯 ⏳ (等待硬件)
- **预计**: 板子到货后1天
- **目标**: LED闪烁，验证FPGA流程

### 里程碑4: CPU上板 ⏳
- **预计**: 板子到货后3天
- **目标**: CPU在FPGA上运行简单程序

### 里程碑5: Linux启动 ⏳
- **预计**: 板子到货后1-2周
- **目标**: 在自制CPU上启动Linux

---

## ⚠️ 已知问题

### 问题1: Icarus Verilog性能
- **现象**: 完整CPU编译超时（>60秒）
- **原因**: 大内存阵列 + 64位运算
- **解决**: 改用Verilator（18秒编译）
- **状态**: ✅ 已解决

### 问题2: ALU有符号除法
- **现象**: 1个测试用例失败（-100 ÷ 10）
- **原因**: Icarus Verilog对64位有符号除法的限制
- **影响**: 仅影响仿真，硬件实现无影响
- **计划**: FPGA使用专用除法器IP核
- **状态**: ⚠️ 已知限制，可接受

---

## 📅 下一步计划

### 本周（2026-01-09 ~ 2026-01-15）

**软件准备**:
1. 下载Linux内核源码
2. 配置内核选项
3. 编译Busybox
4. 准备OpenSBI

**FPGA准备**:
1. 完成工具链安装
2. 创建ULX3S约束文件
3. 编写综合脚本
4. 准备LED测试程序

**文档完善**:
1. 创建综合流程指南
2. 创建Linux编译指南
3. 创建FPGA测试指南

### 板子到货后（D-Day）

**Day 1**:
- 硬件检查和连接测试
- LED闪烁程序烧录
- 串口通信测试

**Day 2-3**:
- CPU综合和烧录
- 裸机Hello World测试
- 基础功能验证

**Week 1**:
- Linux内核烧录
- 系统启动调试
- 串口和HDMI输出测试

**Week 2**:
- 系统稳定性测试
- 性能优化
- 完整文档补充

---

## 📈 时间线

```
2026-01-08  CPU仿真成功 ✅
2026-01-09  RISC-V工具链安装 ✅
            文档重组织 ✅
            FPGA工具链安装中 🔄
2026-01-10  Linux准备（计划）
2026-01-??  ULX3S到货（预计）
2026-01-??  首次点灯（预计）
2026-01-??  CPU上板（预计）
2026-01-??  Linux启动（预计）
```

---

## 🔗 快速链接

- [📄 技术规范](docs/spec.md)
- [📄 文档导航](docs/README.md)
- [📄 测试报告](docs/04-testing/TESTING.md)
- [💻 GitHub仓库](https://github.com/Marandi269/nb-core)

---

**项目开始**: 2026-01-08
**预计完成**: 2026-01月底
